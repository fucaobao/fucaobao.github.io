webpackJsonp([3],{"5dG7":function(t,e){},CTeu:function(t,e,s){"use strict";var i=s("Dd8w"),n=s.n(i),a=s("3Q4o"),c={data:function(){return{count:0,checked:!1,showIcon:!1}},filters:{formatMoney:function(t){return isFinite(t)?t.toFixed(2):""}},props:{hasCheckBox:{type:Boolean,default:!1},item:{type:Object,default:function(){return{}}}},methods:{minus:function(){this.count=Math.max(0,this.count-1)},plus:function(){this.count=parseInt(this.count)+1},setCount:function(t){this.count=t},setChecked:function(t){this.checked=t},toggleItem:function(){var t=this.$refs.checkbox;Object(a.b)(t,"active")?this.checked=!1:this.checked=!0}},watch:{count:function(t){this.showIcon=0!==t,this.$emit("count",n()({},this.item,{count:""===t?0:parseInt(t)}))},checked:function(t){this.$emit("checked",t,this.item)}},components:{}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"good"},[t.hasCheckBox?s("div",{staticClass:"left",on:{click:t.toggleItem}},[s("i",{ref:"checkbox",class:!0===t.checked?"active":""})]):t._e(),t._v(" "),s("div",{staticClass:"middle"},[s("img",{staticClass:"img",attrs:{src:t.item.src}})]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"detail"},[s("p",{staticClass:"name"},[t._v(t._s(t.item.name))]),t._v(" "),s("div",{staticClass:"desc"},[s("p",[s("label",[t._v("规格：")]),t._v(" "),s("span",[t._v(t._s(t.item.desc))])]),t._v(" "),s("p",{staticClass:"price"},[s("label",[t._v("￥")]),t._v(" "),s("span",[t._v(t._s(t._f("formatMoney")(t.item.price)))]),t._v(" "),s("label",[t._v("/"+t._s(t.item.unit))])])])]),t._v(" "),s("div",{staticClass:"operate"},[s("i",{directives:[{name:"show",rawName:"v-show",value:t.showIcon,expression:"showIcon"}],staticClass:"minus",on:{click:t.minus}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showIcon,expression:"showIcon"}],staticClass:"input-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],attrs:{type:"text"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}})]),t._v(" "),s("i",{staticClass:"plus",on:{click:t.plus}})])])])},staticRenderFns:[]};var r=s("VU/8")(c,o,!1,function(t){s("5dG7")},"data-v-098390b4",null);e.a=r.exports},WPze:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("bOdI"),n=s.n(i),a=s("Dd8w"),c=s.n(a),o={props:{deleteText:{type:String,default:"删除"},deleteWidth:{type:String,default:"80"},height:{type:String,default:"110"}},data:function(){return{startX:0,endX:0,moveX:0,disX:0,deleteSlider:""}},mounted:function(){this.$refs.slider.style.height=this.height+"px",this.$refs.delete.style.width=this.deleteWidth+"px",this.$refs.delete.style.right="-"+this.deleteWidth+"px"},methods:{deleteItem:function(){this.$emit("delete")},touchStart:function(t){1==(t=t||event).touches.length&&(this.startX=t.touches[0].clientX)},touchMove:function(t){t=t||event;this.$refs.delete;var e=this.$refs.delete.offsetWidth;1==t.changedTouches.length&&(this.moveX=t.changedTouches[0].clientX,this.disX=this.moveX-this.startX,this.deleteSlider="transform:translateX("+this.disX+"px)",this.disX<0?-this.disX>=e/2&&(this.deleteSlider="transform:translateX(-"+e+"px)"):this.disX>0&&this.disX>=e/2&&(this.deleteSlider="transform:translateX(0)"))},touchEnd:function(t){t=t||event;var e=this.$refs.delete.offsetWidth;1==t.changedTouches.length&&(this.endX=t.changedTouches[0].clientX,this.disX=this.endX-this.startX,this.disX<0?-this.disX>e/2?this.deleteSlider="transform:translateX(-"+e+"px)":this.deleteSlider="transform:translateX(0)":this.disX>0&&(this.disX>e/2?this.deleteSlider="transform:translateX(0)":this.deleteSlider="transform:translateX(-"+e+"px)"))}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"delete"},[s("div",{ref:"slider",staticClass:"slider",style:t.deleteSlider},[s("div",{staticClass:"swipe-wrapper",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[t._t("default")],2),t._v(" "),s("div",{ref:"delete",staticClass:"delete",on:{click:t.deleteItem}},[t._v("\n            "+t._s(t.deleteText)+"\n        ")])])])},staticRenderFns:[]};var l=s("VU/8")(o,r,!1,function(t){s("Zekz")},"data-v-31de419b",null).exports,h=s("CTeu"),d=s("Pl10"),u=s("qwAB"),p=s("Csq2"),f=s("NYxO"),m={data:function(){return{hasCheckItem:!1,hasCheckAll:!1,alertMsg:"",total:0,price:0}},computed:c()({},Object(f.c)(["shoppingCartItems"])),created:function(){console.log(this.shoppingCartItems)},mounted:function(){var t=this.$refs.goodItem;if(t&&t.length)for(var e=0;e<t.length;e++){var s=t[e];s.setCount(s.item.count)}},methods:c()({back:function(){this.$router.back()},deleteItem:function(t){var e={};for(var s in this.shoppingCartItems)t!==this.shoppingCartItems[s].id&&(e[s]=this.shoppingCartItems[s]);this.setShoppingCart(e),this.calcPriceAndTotal()},calc:function(t){this.setShoppingCart(c()({},this.shoppingCartItems,n()({},t.id,t))),this.calcPriceAndTotal()},calcPriceAndTotal:function(){var t=0,e=0;for(var s in this.shoppingCartItems){var i=this.shoppingCartItems[s];t+=i.count,e+=i.price*i.count}this.total=t,this.price=e},showAlert:function(){this.$refs.alert.show()},submit:function(){this.total?this.$router.push({path:this.$router.currentRoute.path+"/confirm"}):(this.alertMsg="购物车为空",this.showAlert())}},Object(f.b)(["setShoppingCart"])),components:{LeftSwipe:l,Alert:d.a,Settle:p.a,GoodItem:h.a,Scroll:u.a}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"header"},[s("i",{staticClass:"back",on:{click:t.back}}),t._v(" "),s("span",{staticClass:"text"},[t._v("我的购物车")])]),t._v(" "),s("div",{staticClass:"content-wrapper"},[s("scroll",{staticClass:"content"},[s("div",{staticClass:"list"},t._l(t.shoppingCartItems,function(e,i){return s("left-swipe",{key:i,on:{delete:function(s){t.deleteItem(e.id)}}},[s("good-item",{ref:"goodItem",refInFor:!0,staticClass:"item",attrs:{hasCheckBox:t.hasCheckItem,item:e},on:{count:t.calc}})],1)}))]),t._v(" "),s("div",{staticClass:"settle-wrapper"},[s("settle",{ref:"settle",attrs:{confirmText:"提交订单",hasCheckBox:t.hasCheckAll,price:t.price,total:t.total},on:{submit:t.submit}})],1)],1),t._v(" "),s("alert",{ref:"alert",attrs:{message:t.alertMsg}}),t._v(" "),s("router-view")],1)])},staticRenderFns:[]};var C=s("VU/8")(m,v,!1,function(t){s("um03")},"data-v-3b0229ea",null);e.default=C.exports},Zekz:function(t,e){},um03:function(t,e){}});
//# sourceMappingURL=3.a93be1dd9915c057c287.js.map