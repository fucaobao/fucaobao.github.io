webpackJsonp([3],{CTeu:function(t,e,s){"use strict";var i=s("Dd8w"),n=s.n(i),a={data:function(){return{count:0,showIcon:!1}},filters:{formatMoney:function(t){return isFinite(t)?t.toFixed(2):""}},props:{hasCheckBox:{type:Boolean,default:!1},item:{type:Object,default:function(){return{}}}},methods:{minus:function(){this.count=Math.max(0,this.count-1)},plus:function(){this.count=parseInt(this.count)+1}},watch:{count:function(t){this.showIcon=0!==t,this.$emit("count",n()({},this.item,{count:""===t?0:parseInt(t)}))}},components:{}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"good"},[s("div",{staticClass:"left"},[s("img",{staticClass:"img",attrs:{src:t.item.src}})]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"detail"},[s("p",{staticClass:"name"},[t._v(t._s(t.item.name))]),t._v(" "),s("div",{staticClass:"desc"},[s("p",[s("label",[t._v("规格：")]),t._v(" "),s("span",[t._v(t._s(t.item.desc))])]),t._v(" "),s("p",{staticClass:"price"},[s("label",[t._v("￥")]),t._v(" "),s("span",[t._v(t._s(t._f("formatMoney")(t.item.price)))]),t._v(" "),s("label",[t._v("/"+t._s(t.item.unit))])])])]),t._v(" "),s("div",{staticClass:"operate"},[s("i",{directives:[{name:"show",rawName:"v-show",value:t.showIcon,expression:"showIcon"}],staticClass:"minus",on:{click:t.minus}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showIcon,expression:"showIcon"}],staticClass:"input-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],attrs:{type:"text"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}})]),t._v(" "),s("i",{staticClass:"plus",on:{click:t.plus}})])])])},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(t){s("NSO5")},"data-v-3dfbe87b",null);e.a=o.exports},NSO5:function(t,e){},WPze:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("bOdI"),n=s.n(i),a=s("Dd8w"),r=s.n(a),o={props:{deleteText:{type:String,default:"删除"},deleteWidth:{type:String,default:"80"},height:{type:String,default:"110"}},data:function(){return{startX:0,endX:0,moveX:0,disX:0,deleteSlider:""}},mounted:function(){this.$refs.slider.style.height=this.height+"px",this.$refs.delete.style.width=this.deleteWidth+"px",this.$refs.delete.style.right="-"+this.deleteWidth+"px"},methods:{deleteItem:function(){this.$emit("delete")},touchStart:function(t){1==(t=t||event).touches.length&&(this.startX=t.touches[0].clientX)},touchMove:function(t){t=t||event;this.$refs.delete;var e=this.$refs.delete.offsetWidth;1==t.changedTouches.length&&(this.moveX=t.changedTouches[0].clientX,this.disX=this.moveX-this.startX,this.deleteSlider="transform:translateX("+this.disX+"px)",this.disX<0?-this.disX>=e/2&&(this.deleteSlider="transform:translateX(-"+e+"px)"):this.disX>0&&this.disX>=e/2&&(this.deleteSlider="transform:translateX(0)"))},touchEnd:function(t){t=t||event;var e=this.$refs.delete.offsetWidth;1==t.changedTouches.length&&(this.endX=t.changedTouches[0].clientX,this.disX=this.endX-this.startX,this.disX<0?-this.disX>e/2?this.deleteSlider="transform:translateX(-"+e+"px)":this.deleteSlider="transform:translateX(0)":this.disX>0&&(this.disX>e/2?this.deleteSlider="transform:translateX(0)":this.deleteSlider="transform:translateX(-"+e+"px)"))}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"delete"},[s("div",{ref:"slider",staticClass:"slider",style:t.deleteSlider},[s("div",{staticClass:"swipe-wrapper",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[t._t("default")],2),t._v(" "),s("div",{ref:"delete",staticClass:"delete",on:{click:t.deleteItem}},[t._v("\n            "+t._s(t.deleteText)+"\n        ")])])])},staticRenderFns:[]};var l=s("VU/8")(o,c,!1,function(t){s("Zekz")},"data-v-31de419b",null).exports,h=s("CTeu"),d=s("Pl10"),u=s("qwAB"),p=s("Csq2"),v=s("NYxO"),f={data:function(){return{hasCheckItem:!0,hasCheckAll:!0,alertMsg:""}},computed:r()({},Object(v.c)(["shoppingCartItems"]),{total:{get:function(){var t=0;for(var e in this.shoppingCartItems)t+=this.shoppingCartItems[e].count;return t},set:function(t){this.total!==t&&(this.total=t)}},price:{get:function(){var t=0;for(var e in this.shoppingCartItems){var s=this.shoppingCartItems[e];t+=s.price*s.count}return t},set:function(t){this.price!==t&&(this.price=t)}}}),created:function(){console.log(this.shoppingCartItems)},methods:r()({back:function(){this.$router.back()},deleteItem:function(t){var e={};for(var s in this.shoppingCartItems)t!==this.shoppingCartItems[s].id&&(e[s]=this.shoppingCartItems[s]);this.setShoppingCart(e)},calc:function(t){this.setShoppingCart(r()({},this.shoppingCartItems,n()({},t.id,t)));var e=0,s=0;for(var i in this.shoppingCartItems){var a=this.shoppingCartItems[i];e+=a.count,s+=a.price*a.count}this.total=e,this.price=s,0===t.count&&this.deleteItem(t.id)},showAlert:function(){this.$refs.alert.show()},submit:function(){this.total?this.$router.push({path:this.$router.currentRoute.path+"/confirm"}):(this.alertMsg="购物车为空",this.showAlert())}},Object(v.b)(["setShoppingCart"])),components:{LeftSwipe:l,Alert:d.a,Settle:p.a,GoodItem:h.a,Scroll:u.a}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"header"},[s("i",{staticClass:"back",on:{click:t.back}}),t._v(" "),s("span",{staticClass:"text"},[t._v("我的购物车")])]),t._v(" "),s("div",{staticClass:"content-wrapper"},[s("scroll",{staticClass:"content"},[s("div",{staticClass:"list"},t._l(t.shoppingCartItems,function(e,i){return s("left-swipe",{key:i,on:{delete:function(s){t.deleteItem(e.id)}}},[s("good-item",{staticClass:"item",attrs:{item:e,hasCheckBox:t.hasCheckItem},on:{count:t.calc}})],1)}))]),t._v(" "),s("div",{staticClass:"settle-wrapper"},[s("settle",{attrs:{price:t.price,total:t.total,confirmText:"提交订单",hasCheckBox:t.hasCheckAll},on:{submit:t.submit}})],1)],1),t._v(" "),s("alert",{ref:"alert",attrs:{message:t.alertMsg}}),t._v(" "),s("router-view")],1)])},staticRenderFns:[]};var C=s("VU/8")(f,m,!1,function(t){s("pyN0")},"data-v-161354a8",null);e.default=C.exports},Zekz:function(t,e){},pyN0:function(t,e){}});
//# sourceMappingURL=3.1fd4af11d15d0b21d052.js.map